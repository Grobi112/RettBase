/* --- Allgemeines Design (Konsolidiert) --- */

:root {

    --primary-color: #0ea5e9; /* Sky Blue (Header-Farbe) */

    --secondary-color: #f3f4f6; /* Light Gray */

    --text-color: #1e293b; /* Dark Slate */

    --border-color: #e5e7eb;

    --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);

    --color-unmanned: #ffe0e0; /* Rot (Sehr hell) */

    --color-fully-manned: #a8f3a8; /* Grün (Sehr hell) */

    --color-unmanned-border: #b91c1c; /* Dunkelrot */

}



* {

    box-sizing: border-box;

    margin: 0;

    padding: 0;

    font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;

}



body {

    background-color: var(--secondary-color);

    color: var(--text-color);

    padding-bottom: 30px;

}



/* --- Top Bar / Header --- */

#topBar {

    padding: 15px 25px;

    background-color: white;

    box-shadow: var(--shadow);

    display: flex;

    justify-content: space-between;

    align-items: center;

    gap: 15px;

    margin-bottom: 20px;

    /* FIX: Position wird auf static gesetzt, um Rendering-Fehler bei Dropdowns zu vermeiden */

    position: static; 

    z-index: 10; 

}



.title-group {
    display: flex;
    align-items: center;
    gap: 12px;
}

.back-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
    transition: opacity 0.2s;
}

.back-btn:hover {
    opacity: 0.7;
}

.back-btn svg {
    width: 24px;
    height: 24px;
}

.page-title {

    font-size: 1.5rem;

    font-weight: 600;

    color: var(--primary-color);

    margin: 0;

}



/* Controls Group */

.controls-group {

    display: flex;

    gap: 10px;

    /* FIX: Richtet alle Elemente (Label-Gruppe und Button) an der UNTEREN Kante aus */

    align-items: flex-end; 

}



/* Styling für das Select-Label */

.controls-group label {

    display: block; 

    color: white; 

    font-weight: 500;

    font-size: 0.9rem;

    margin-bottom: 3px; 

    display: block; 
    

    /* FIX: Setzt Position auf Standard zurück */

    position: static; 

    z-index: auto;

}



.control-select, .control-btn {

    padding: 10px 15px;

    font-size: 14px;

    border-radius: 8px;

    border: 1px solid var(--border-color);

    cursor: pointer;

    transition: all 0.2s;

    flex-shrink: 0;

    /* FIX: Stellt sicher, dass die Select-Liste über allen anderen Elementen liegt */

    /* Position wird beibehalten, da es das Element selbst ist, das das Menü rendert */

    position: relative; 

    z-index: 12; 

}



.control-select {

    background-color: white;

    color: var(--text-color);

    min-width: 150px;

    /* Korrektur: Entfernt manuellen Margin */

    margin-top: 0; 

}



.primary-btn {

    background-color: var(--primary-color);

    color: white;

    border-color: var(--primary-color);

    /* Korrektur: Entfernt manuellen Margin */

    margin-top: 0;

}



.primary-btn:hover {

    background-color: #0b93d0;

}



/* --- Tage Grid und Day Card (Full Width / Vertikal) --- */

.days-grid {

    display: flex; 

    flex-direction: column; 

    align-items: center; 

    gap: 25px; 

    padding: 0 20px;

    width: 100%; 

    max-width: 100%;

    margin: 0 auto;

}



.day-card {

    width: 100%; 

    max-width: 1100px; 

    background: white;

    border-radius: 12px;

    box-shadow: var(--shadow); 

    overflow: hidden;

}



/* Header (Datumshintergrund) */

.day-header {

    background-color: var(--primary-color);

    color: white;

    padding: 12px 15px;

    font-size: 1.1rem;

    font-weight: 600;

    display: flex;

    justify-content: space-between;

    align-items: center;

}



.day-controls {

    display: flex;

    gap: 10px;

    align-items: center;

}



.day-content {

    padding: 0; 

}



/* Placeholder/Info */

.info-card {

    width: 100%;

    text-align: center;

    padding: 30px;

    color: #64748b;

}



/* --- Schicht-Status und Zeilen-Layout --- */



.shift-row {

    display: flex;

    align-items: center;           /* alle Kinder mit gleicher Höhe sauber auf einer Linie */

    justify-content: flex-start;  /* Horizontal linksbündig */

    padding: 8px 15px;

    border-bottom: 1px solid var(--border-color);

    transition: background-color 0.3s ease;

    background-color: var(--color-unmanned); /* Rot (Unbesetzt / Teilbesetzt) */

    gap: 0;

}



.shift-row:last-child {

    border-bottom: none;

}



.shift-row.fully-manned {

    background-color: var(--color-fully-manned); /* Grün, wenn voll besetzt */

}



.shift-select {

    flex-shrink: 0;

    flex-grow: 0;                 /* Verhindert, dass das Dropdown wächst */

    width: 110px;                  /* Breit genug für RH2T, KTW3F etc. - vollständig lesbar */

    box-sizing: border-box;

    padding: 6px 10px;

    border-radius: 6px;

    border: 1px solid #ccc;

    font-size: 13px;

    text-align: center;

    margin-right: 10px;

    height: 32px;                 /* FESTE Höhe - Container orientiert sich daran */

    line-height: 20px;            /* Text vertikal zentriert */

    /* align-self entfernt - align-items: center auf .shift-row reicht */

}



.personnel-slot {

    flex: 1 1 0;              /* nimmt restlichen Platz, kann schrumpfen */

    min-width: 0;             /* darf schrumpfen, bleibt im Container */

    display: flex;

    flex-direction: row;      /* Slot 1 + Slot 2 nebeneinander */

    flex-wrap: nowrap;

    align-items: center;

    justify-content: flex-start;

    gap: 8px;

}



/* Bereitschaften-Sektion */

.bereitschaften-section {

    background-color: #f8f9fa;

    border: 1px solid #e5e7eb;

    border-radius: 6px;

    padding: 12px;

    margin-bottom: 12px;

}



.bereitschaften-header {

    display: flex;

    justify-content: space-between;

    align-items: center;

    margin-bottom: 8px;

}



.bereitschaften-title {

    font-weight: 600;

    color: #3b82f6;

    font-size: 0.95rem;

}



.add-bereitschaft-btn {

    background-color: #3b82f6;

    color: white;

    border: none;

    border-radius: 4px;

    width: 28px;

    height: 28px;

    display: flex;

    align-items: center;

    justify-content: center;

    cursor: pointer;

    font-size: 18px;

    padding: 0;

}



.add-bereitschaft-btn:hover {

    background-color: #2563eb;

}



.bereitschaften-list {

    display: flex;

    flex-direction: column;

    gap: 6px;

}



.bereitschaft-item {

    background-color: #3b82f6;

    color: white;

    padding: 8px 12px;

    border-radius: 4px;

    display: flex;

    justify-content: space-between;

    align-items: center;

    cursor: pointer;

    transition: background-color 0.2s;

}



.bereitschaft-item:hover {

    background-color: #2563eb;

}



.bereitschaft-name {

    font-size: 0.9rem;

    font-weight: 500;

}



.bereitschaft-empty {

    color: #6b7280;

    font-size: 0.85rem;

    font-style: italic;

    text-align: center;

    padding: 8px;

}



/* Verhindere Textauswahl bei Bereitschafts-Personal */

.personnel-label.bereitschaft-personnel {

    -webkit-user-select: none;

    -moz-user-select: none;

    -ms-user-select: none;

    user-select: none;

    -webkit-touch-callout: none;

}



.personnel-label {

    flex: 1 1 0;                  /* Beide Slots teilen sich den verfügbaren Platz gleichmäßig */

    min-width: 0;                 /* darf schrumpfen, bleibt im Container */

    max-width: 100%;

    padding: 6px 10px;            /* GLEICH wie .shift-select */

    border-radius: 6px;           /* GLEICH wie .shift-select */

    font-size: 13px;              /* GLEICH wie .shift-select */

    cursor: pointer;

    text-align: center;

    border: 1px solid #e2e8f0;

    white-space: nowrap;

    overflow: hidden;

    text-overflow: ellipsis;

    position: relative;

    user-select: none;

    display: flex;

    align-items: center;          /* Vertikal zentriert */

    justify-content: center;      /* Horizontal zentriert (wird bei .assigned überschrieben) */

    height: 32px;                /* FESTE Höhe, GLEICH wie Dropdown - Container orientiert sich daran */

    box-sizing: border-box;

}



.personnel-label.unassigned {

    color: var(--color-unmanned-border); 

    background-color: var(--color-unmanned); 

    border: 1px solid var(--color-unmanned-border);  /* EXPLIZITER Rahmen */

    height: 32px;                /* FESTE Höhe, GLEICH wie Dropdown */

    display: flex;

    align-items: center;         /* Vertikal zentriert */

    justify-content: center;      /* Horizontal zentriert */

    box-sizing: border-box;

}



.personnel-label.assigned {

    color: var(--text-color);

    background-color: var(--secondary-color);

    font-weight: 500;

    border: 1px solid #c9d2de;  /* EXPLIZITER Rahmen */

    height: 32px;                /* FESTE Höhe, GLEICH wie Dropdown */

    display: flex;

    align-items: center;         /* Vertikal zentriert */

    justify-content: center;     /* Inhalt im Slot zentriert */

    box-sizing: border-box;

}

/* Text im belegten Slot horizontal zentrieren */
.personnel-label.assigned .personnel-name {
    flex: 1 1 auto;
    text-align: center;
}



.remove-btn {

    position: absolute;

    right: 4px;

    top: 50%;

    transform: translateY(-50%);

    cursor: pointer;

    opacity: 0.8;

    display: inline-flex;

    align-items: center;

    justify-content: center;

    padding: 2px;

    transition: opacity 0.2s;

    width: 18px;

    height: 18px;

    line-height: 1;

}



.remove-btn:hover {

    opacity: 1;

}



.remove-btn svg {

    display: block;

    width: 16px;

    height: 16px;

}



/* Papierkorb-Button in Personal-Slot (kein Rahmen) */

.personnel-delete-btn {

    background: none !important;

    border: none !important;

    padding: 0 !important;

    margin: 0 !important;

    cursor: pointer;

    opacity: 0.7;

    transition: opacity 0.2s;

    position: absolute;

    right: 4px;

    top: 50%;

    transform: translateY(-50%);

    width: 18px;

    height: 18px;

    font-size: 14px;

    line-height: 1;

    outline: none !important;

    box-shadow: none !important;

}

/* Einheitliche Größe der SVG-Mülleimer-Icons - größer für bessere Sichtbarkeit */
.icon-trash-svg {
    width: 18px;
    height: 18px;
    display: block;
    flex-shrink: 0;
}



.personnel-delete-btn:hover {

    opacity: 1;

}



/* --- Button-Styles --- */



/* Tag Löschen Icon (Papierkorb) */

.delete-day-btn {

    background-color: transparent; 

    border: none;

    padding: 5px 8px; 

    cursor: pointer;

    transition: background-color 0.2s;

    display: inline-flex;

    align-items: center;

    justify-content: center;

}



.delete-day-btn svg {

    display: block;

}



.delete-day-btn:hover {

    background-color: rgba(255, 255, 255, 0.2); 

}



.add-shift-btn {

    background-color: rgba(255, 255, 255, 0.2); 

    color: white;

    border: 1px solid rgba(255, 255, 255, 0.5);

    padding: 5px 10px;

    font-size: 0.85rem;

    font-weight: 500;

    border-radius: 6px;

    cursor: pointer;

}

.add-shift-btn:hover {

    background-color: rgba(255, 255, 255, 0.3);

}



/* Löschen-Button für Schicht (Icon in der Zeile) */

.delete-shift-btn {

    background-color: transparent;

    border: none;

    margin-left: 8px; /* Etwas weniger Margin für bessere Passform */

    padding: 0 4px;

    cursor: pointer; 

    flex-shrink: 0;

    transition: opacity 0.2s;

    display: inline-flex;

    align-items: center; /* Vertikal zentriert */

    justify-content: center; /* Horizontal zentriert */

    opacity: 0.7;

    height: 32px; /* Gleiche Höhe wie Dropdown und Slots */

    width: 28px; /* Etwas schmaler für bessere Passform */

}



.delete-shift-btn svg {

    display: block;

}



.delete-shift-btn:hover {

    opacity: 1;

}



/* --- Popup Form --- */



.popup-overlay {

    position: fixed;

    top: 0; left: 0; right: 0; bottom: 0;

    background: rgba(0, 0, 0, 0.6);

    z-index: 999;

    display: none;

}



/* Personal-Popup sollte über anderen Popups liegen */

#personnelPopupOverlay {

    z-index: 1999;

}



#personnelPopupForm {
    z-index: 2000; 
    backdrop-filter: blur(2px);
    /* Popup oben positionieren statt zentriert */
    top: 5vh !important;
    left: 50% !important;
    transform: translate(-50%, 0) !important;
}



.popup-form {

    display: none; 

    position: fixed;

    top: 50%;

    left: 50%;

    transform: translate(-50%, -50%);

    background: #fff;

    padding: 25px;

    border-radius: 12px;

    box-shadow: var(--shadow);

    z-index: 1000;

    width: 90%;

    max-width: 500px; /* Größere Breite für bessere Darstellung auf allen Geräten */

}



.popup-form h2 {

    margin-bottom: 20px;

    font-size: 1.3rem;

    color: var(--text-color);

}



.popup-form label {

    display: block;

    margin-bottom: 5px;

    font-weight: 500;

    font-size: 0.9rem;

    color: #64748b;

}



.popup-form input, .popup-form select {

    width: 100%;

    padding: 10px;

    margin-bottom: 15px;

    border: 1px solid var(--border-color);

    border-radius: 8px;

    font-size: 1rem;

    transition: border-color 0.2s;

}



.popup-form input:focus, .popup-form select:focus {

    outline: none;

    border-color: var(--primary-color);

}



.qualification-group {

    display: flex;

    flex-wrap: wrap;

    gap: 10px;

    margin-bottom: 15px;

}



/* Für Bereitschafts-Typ-Dropdown: block statt flex */

.qualification-group:has(select#bereitschaftsTypSelect) {

    display: block !important;

}

.qualification-group label {

    display: flex;

    align-items: center; 

    font-weight: normal;

    font-size: 0.9rem;

    color: var(--text-color);

    cursor: pointer; 

}



/* Endgültiger Fix für Checkbox-Ausrichtung */

.qualification-group input[type="checkbox"] {

    margin: 0 5px 0 0; 

    padding: 0; 

    width: auto; 

    vertical-align: middle; 

}



.form-actions {

    display: flex;

    justify-content: flex-end;

    gap: 10px;

    margin-top: 20px;

}



.form-actions button {

    padding: 10px 15px;

    border: none;

    border-radius: 8px;

    cursor: pointer;

    font-weight: 600;

    transition: background-color 0.2s;

}



.form-actions button:first-child {

    background-color: var(--primary-color);

    color: white;

}



.form-actions button:first-child:hover {

    background-color: #0b93d0;

}



.cancel-btn {

    background-color: var(--secondary-color);

    color: var(--text-color);

}



.cancel-btn:hover {

    background-color: #e2e8f0;

}



/* --- Responsive Anpassungen (Mobile) --- */

/* Tablet und kleinere Desktop-Bildschirme: Responsive-Modus aktivieren BEVOR Überschneidungen entstehen */
/* Ab 900px Breite: Slots untereinander, um sicherzustellen, dass genug Platz für Namen + Papierkorb ist */
@media (min-width: 768px) and (max-width: 1200px) {
    /* Personal-Popup Höhe anpassen für Tablet Querformat */
    #personnelPopupForm {
        max-height: 85vh !important;
        overflow-y: auto !important;
    }
    
    /* Mitarbeiter-Liste auf Tablet: 2 Zeilen weniger anzeigen */
    .personnel-mitarbeiter-list {
        max-height: 220px !important; /* Reduziert von 300px, ca. 2 Zeilen weniger */
    }
    
    /* Popup für Tablet responsiv machen */
    #dayPopupForm {
        width: 95vw !important;
        height: 95vh !important;
        max-width: 95vw !important;
        max-height: 95vh !important;
        min-width: 400px !important;
        min-height: 300px !important;
        padding: 12px !important;
        padding-bottom: 30px !important;  /* Mehr Abstand unten für Tablet */
    }
    
    /* Im Popup-Fenster: Schicht, Slot 1 und Slot 2 nebeneinander */
    #dayPopupForm .shift-row {
        align-items: center !important;  /* Alles vertikal zentriert */
        padding: 8px 5px !important;
        min-width: 0 !important;
        width: 100% !important;
        box-sizing: border-box !important;
    }
    
    #dayPopupForm .shift-row .shift-select {
        align-self: center !important;  /* Dropdown vertikal zentriert */
        margin-right: 10px !important;
        margin-bottom: 0 !important;
        flex-shrink: 0 !important;
        flex-grow: 0 !important;
    }
    
    #dayPopupForm .personnel-slot {
        flex-direction: row !important;  /* Slots NEBENEINANDER auf Tablet */
        gap: 8px !important;
        align-items: center !important;
        flex: 1 1 auto !important;
        min-width: 0 !important;
        width: 100% !important;
    }
    
    #dayPopupForm .personnel-label {
        flex: 1 1 0 !important;  /* Slots teilen sich den Platz gleichmäßig */
        min-width: 0 !important;
        max-width: 50% !important;  /* Maximal die Hälfte der Breite */
        height: 32px !important;  /* FESTE Höhe bleibt unverändert */
        padding-right: 50px !important;  /* Sicherer Abstand für Papierkorb - verhindert Überschneidung */
        padding-left: 12px !important;
        box-sizing: border-box !important;
        position: relative !important;  /* Wichtig für absolute Positionierung des Papierkorbs */
        overflow: visible !important;  /* Text soll nicht abgeschnitten werden */
        justify-content: flex-start !important;  /* Text links ausrichten, nicht zentrieren */
    }
    
    /* Text im Slot: sicherstellen, dass er nicht überlappt wird und IMMER Platz zum Papierkorb hat */
    #dayPopupForm .personnel-label .personnel-name {
        display: inline-block !important;
        width: auto !important;  /* Automatische Breite basierend auf Inhalt */
        max-width: calc(100% - 55px) !important;  /* Maximal bis zum Papierkorb - 5px Sicherheitsabstand */
        padding-right: 10px !important;  /* Zusätzlicher Abstand vor dem Papierkorb */
        margin-right: 0 !important;
        text-overflow: ellipsis !important;
        overflow: hidden !important;
        white-space: nowrap !important;
        box-sizing: border-box !important;
        text-align: left !important;  /* Links ausrichten */
        flex: 0 1 auto !important;  /* Nicht flex-grow, damit Text nicht gedehnt wird */
    }
    
    /* Papierkorb-Button in Slots: absolut positioniert, mit Sicherheitsabstand */
    #dayPopupForm .shift-row .personnel-label .personnel-delete-btn {
        position: absolute !important;
        right: 8px !important;  /* Mehr Abstand vom Rand */
        top: 50% !important;
        transform: translateY(-50%) !important;
        z-index: 10 !important;
        width: 24px !important;
        height: 24px !important;
        padding: 0 !important;
        margin: 0 !important;
        background: transparent !important;
        border: none !important;
    }
    
    /* SVG-Icon im Papierkorb-Button */
    #dayPopupForm .shift-row .personnel-label .personnel-delete-btn .icon-trash-svg {
        width: 20px !important;
        height: 20px !important;
        display: block !important;
    }
    
    /* Gesamtübersicht: 1 Spalte auf Tablet statt 2 */
    #dayPopupForm .calendar-day-overview {
        grid-template-columns: 1fr !important;
        gap: 10px !important;
    }
    
    /* Standort-Karten: Volle Breite nutzen */
    #dayPopupForm .overview-standort-card {
        min-width: 0 !important;  /* Keine Mindestbreite, damit Responsive früher greift */
        width: 100% !important;
        box-sizing: border-box !important;
    }
    
    /* Bereitschaften-Grid: 2 Spalten auf Tablet (nebeneinander), Buttons kleiner */
    #dayPopupForm .bereitschaften-top-grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 6px !important;
    }
    
    /* Bereitschafts-Buttons kleiner auf Tablet */
    #dayPopupForm .bereitschaft-top-item {
        padding: 4px 6px !important;  /* Kleineres Padding */
        font-size: 0.75rem !important;  /* Kleinere Schrift */
    }
    
    #dayPopupForm .bereitschaft-top-item .bereitschaft-name {
        font-size: 0.8rem !important;  /* Angepasste Schriftgröße */
    }
    
    #dayPopupForm .bereitschaft-top-item .bereitschaft-typ-top {
        font-size: 0.7rem !important;  /* Kleinere Schrift für Typ */
    }
    
    /* "+ Bereitschaft" Button auf Tablet - natürliche Breite beibehalten, nicht dehnen */
    #dayPopupForm #addBereitschaftForDayBtn {
        flex-grow: 0 !important;
        flex-shrink: 0 !important;
        width: auto !important;
        white-space: nowrap !important;
    }
}

/* Größere Bildschirme (über 1200px): Slots können nebeneinander, ABER nur wenn genug Platz */
@media (min-width: 1201px) {
    /* Sicherstellen, dass auch auf großen Bildschirmen genug Platz zwischen Text und Papierkorb ist */
    #dayPopupForm .personnel-label.assigned {
        padding-right: 50px !important;  /* Sicherer Abstand für Papierkorb */
        height: 32px !important;  /* FESTE Höhe bleibt unverändert */
    }
    
    #dayPopupForm .personnel-label {
        height: 32px !important;  /* FESTE Höhe bleibt unverändert */
    }
    
    #dayPopupForm .personnel-label .personnel-name {
        max-width: calc(100% - 55px) !important;  /* Maximal bis zum Papierkorb - 5px Sicherheitsabstand */
        padding-right: 10px !important;  /* Zusätzlicher Abstand vor dem Papierkorb */
    }
    
    /* Falls nicht genug Platz: Slots untereinander */
    #dayPopupForm .personnel-slot {
        /* Wenn Container zu schmal wird, automatisch untereinander */
        flex-wrap: wrap !important;
    }
}

/* Handy und Tablet (bis 1200px) */
@media (max-width: 1200px) {
    /* Settings-Popup: Gleiche Ansicht wie Desktop - keine speziellen Overrides nötig */
    
    /* Personal-Popup Höhe anpassen für Handy */
    #personnelPopupForm {
        max-height: 85vh !important;
        overflow-y: auto !important;
    }

    #topBar {

        flex-direction: column;

        align-items: stretch;

        padding: 15px;

    }

    .controls-group {

        flex-direction: row;

        flex-wrap: wrap;

        justify-content: center;

        gap: 8px;

        /* Vertikale Ausrichtung auch mobil beibehalten */

        align-items: flex-end; 

    }

    .control-select, .control-btn {

        flex-grow: 1;

        min-width: unset;

    }
    
    /* Ausnahme: "+ Bereitschaft" Button soll nicht gedehnt werden - höhere Spezifität */
    #dayBereitschaftenSection .day-bereitschaften-header #addBereitschaftForDayBtn,
    #dayPopupForm #dayBereitschaftenSection .day-bereitschaften-header #addBereitschaftForDayBtn,
    #dayPopupForm #addBereitschaftForDayBtn {
        flex-grow: 0 !important;
        flex-shrink: 0 !important;
        flex-basis: auto !important;
        width: auto !important;
        min-width: auto !important;
        max-width: none !important;
        white-space: nowrap !important;
    }

    .days-grid {

        padding: 0 10px; 

    }

    .shift-row {

        flex-wrap: nowrap;      /* nichts umbrechen, alles in einer Zeile */

        padding: 10px;

    }

    .shift-select {

        margin-right: 10px;

        margin-bottom: 0;

        width: 110px !important;            /* wie im Desktop-Layout - breit genug für RH2T, KTW3F - vollständig lesbar */

        height: 32px !important;

        line-height: 20px !important;     /* GLEICH wie Desktop */

        padding: 6px 10px !important;      /* GLEICH wie Desktop */

        box-sizing: border-box !important;

        text-align: center !important;

        border-radius: 6px !important;

        font-size: 13px !important;

    }

    .personnel-slot {

        width: auto;

        flex-direction: row;    /* Slots NEBENEINANDER */

        flex-wrap: nowrap;

        gap: 8px;

        align-items: center;

    }

    .personnel-label {

        flex: 1 1 0 !important;

        min-width: 0 !important;

        height: 32px !important;          /* GLEICH wie Dropdown */

        padding: 6px 28px 6px 10px !important;  /* Rechts mehr Platz für Papierkorb */

        border-radius: 6px !important;   /* GLEICH wie Dropdown */

        font-size: 13px !important;       /* GLEICH wie Dropdown */

        box-sizing: border-box !important;

        display: flex !important;

        align-items: center !important;

        justify-content: center !important;  /* Name zentriert, Papierkorb absolut positioniert */
    }
    
    /* Papierkorb-Button in Slots auf Handy: sicherstellen, dass er nicht über Text liegt */
    .shift-row .personnel-label .personnel-delete-btn {
        right: 4px !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        z-index: 5 !important;
    }
    
    /* Popup für Handy responsiv machen */
    #dayPopupForm {
        width: 98vw !important;
        height: 98vh !important;
        max-width: 98vw !important;
        max-height: 98vh !important;
        min-width: 300px !important;
        min-height: 250px !important;
        padding: 10px !important;
        padding-bottom: 30px !important;  /* Mehr Abstand unten für Handy */
        top: 1vh !important;
        left: 1vw !important;
    }
    
    /* Im Popup-Fenster auf Handy: Slots untereinander anordnen */
    #dayPopupForm .shift-row {
        align-items: flex-start !important;
        flex-wrap: wrap !important;
        padding: 8px 5px !important;
    }
    
    #dayPopupForm .shift-row .shift-select {
        align-self: center !important;
        margin-right: 10px !important;
        margin-bottom: 0 !important;
        flex-shrink: 0 !important;
        width: 100px !important;  /* Etwas schmaler auf Handy */
    }
    
    #dayPopupForm .personnel-slot {
        flex-direction: row !important;  /* Slots NEBENEINANDER auf Handy */
        gap: 8px !important;
        align-items: center !important;
        flex: 1 1 auto !important;
        min-width: 0 !important;
        width: 100% !important;
    }
    
    #dayPopupForm .personnel-label {
        flex: 1 1 0 !important;  /* Slots teilen sich den Platz gleichmäßig */
        min-width: 0 !important;
        max-width: 50% !important;  /* Maximal die Hälfte der Breite */
        height: 32px !important;  /* FESTE Höhe bleibt unverändert */
        padding-right: 28px !important;  /* Platz für Papierkorb */
        padding-left: 10px !important;
        box-sizing: border-box !important;
    }
    
    /* Papierkorb-Button im Popup auf Handy */
    #dayPopupForm .shift-row .personnel-label .personnel-delete-btn {
        right: 4px !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        z-index: 5 !important;
    }
    
    /* Gesamtübersicht: 1 Spalte auf Handy */
    #dayPopupForm .calendar-day-overview {
        grid-template-columns: 1fr !important;
        gap: 10px !important;
    }
    
    /* Bereitschaften-Grid: 2 Spalten auf Tablet, 1 Spalte auf Handy */
    /* Tablet (768px - 1200px): 2 Spalten nebeneinander */
    @media (min-width: 768px) {
        #dayPopupForm .bereitschaften-top-grid {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 6px !important;
        }
    }
    
    /* Handy (max-width: 768px): 1 Spalte untereinander */
    @media (max-width: 767px) {
        #dayPopupForm .bereitschaften-top-grid {
            grid-template-columns: 1fr !important;
            gap: 6px !important;
        }
    }
    
    /* Bereitschafts-Buttons kleiner auf Handy */
    #dayPopupForm .bereitschaft-top-item {
        padding: 4px 6px !important;  /* Kleineres Padding */
        font-size: 0.75rem !important;  /* Kleinere Schrift */
    }
    
    #dayPopupForm .bereitschaft-top-item .bereitschaft-name {
        font-size: 0.8rem !important;  /* Angepasste Schriftgröße */
    }
    
    #dayPopupForm .bereitschaft-top-item .bereitschaft-typ-top {
        font-size: 0.7rem !important;  /* Kleinere Schrift für Typ */
    }
    
    /* "+ Bereitschaft" Button auf Handy - natürliche Breite beibehalten, nicht dehnen */
    /* WICHTIG: Muss alle Regeln aus max-width: 1200px überschreiben */
    #dayBereitschaftenSection .day-bereitschaften-header #addBereitschaftForDayBtn,
    #dayPopupForm #dayBereitschaftenSection .day-bereitschaften-header #addBereitschaftForDayBtn,
    #dayPopupForm #addBereitschaftForDayBtn {
        flex-grow: 0 !important;
        flex-shrink: 0 !important;
        flex-basis: auto !important;
        width: auto !important;
        min-width: auto !important;
        max-width: none !important;
        white-space: nowrap !important;
    }
    
    /* Standort-Karten im Popup: volle Breite auf Handy */
    #dayPopupForm .overview-standort-card {
        width: 100% !important;
        min-width: 0 !important;
    }
    
    /* Kommentar-Popup auf Handy/Tablet: volle Breite und zentriert */
    #kommentarPopupForm {
        width: 95vw !important;
        max-width: 95vw !important;
        padding: 0 !important;
        /* Zentrierung für mobile Geräte - überschreibt JavaScript-Styles und Basis-Regeln */
        top: 50% !important;
        left: 50% !important;
        right: auto !important;
        bottom: auto !important;
        transform: translate(-50%, -50%) !important;
        position: fixed !important;
        margin: 0 !important;
    }
    
    #kommentarPopupForm .settings-header {
        padding: 15px !important;
        margin: 0 !important;
        box-sizing: border-box !important;
    }
    
    #kommentarPopupForm .form-content {
        width: 100% !important;
        box-sizing: border-box !important;
        padding: 15px !important;
        margin: 0 !important;
        display: block !important;
    }
    
    #kommentarPopupForm .form-content label {
        display: block !important;
        margin-bottom: 8px !important;
    }
    
    #kommentarPopupForm textarea {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        margin: 0 !important;
        padding: 12px !important;
        display: block !important;
    }
}



/* --- Einstellungen & Neue UI-Elemente --- */



.icon-btn {

    background-color: transparent;

    border: 1px solid var(--border-color);

    padding: 8px;

    display: flex;

    align-items: center;

    justify-content: center;

    color: var(--text-color);

}



.icon-btn:hover {

    background-color: var(--secondary-color);

}



.popup-form.large {
    max-width: 800px;
    height: 90vh; /* Feste Höhe statt max-height, damit Popup nicht skaliert */
    min-height: 90vh; /* Mindesthöhe */
    display: none; /* Standardmäßig versteckt */
    flex-direction: column;
    overflow: hidden; /* Verhindert Scrollbalken am Container */
}

.popup-form.large .settings-header {
    flex-shrink: 0; /* Header nicht skalierbar */
}

.popup-form.large .settings-tabs {
    flex-shrink: 0; /* Tabs nicht skalierbar */
}

.popup-form.large .settings-content {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
    padding: 0;
    margin: 0;
    width: 100%;
    box-sizing: border-box;
    position: relative;
}

/* Sicherstellen, dass Tab-Panes korrekt positioniert sind */
.popup-form.large .tab-pane {
    width: 100%;
    box-sizing: border-box;
    position: relative;
}

.popup-form.large .settings-section {
    width: 100%;
    box-sizing: border-box;
    position: relative;
}

.popup-form.large .settings-list {
    width: 100%;
    box-sizing: border-box;
}



/* Tagesübersicht-Popup: Bildschirmgröße und skalierbar */
#dayPopupForm {
    /* näher an oberen linken Rand und etwas größer */
    max-width: 99vw;
    max-height: 99vh;
    width: 97vw;
    height: 97vh;
    min-width: 600px;
    min-height: 400px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    padding: 15px;
    padding-bottom: 30px !important;  /* Mehr Abstand unten, damit letzter Standort nicht abgeschnitten wird */
    resize: both; /* Ermöglicht manuelles Skalieren */
    /* Standard-Zentrierung der .popup-form überschreiben:
       Popup sitzt weiter oben links und füllt den Bildschirm besser aus */
    top: 2vh !important;
    left: 2vw !important;
    transform: none !important;
}

/* Header des Tages-Popups fixieren (nicht skalierbar) */
#dayPopupForm .settings-header {
    flex-shrink: 0;
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border-color);
}

/* Inhalt des Tages-Popups - kein eigener Scrollbalken, da Popup selbst scrollt */
#dayPopupForm #dayOverviewContent {
    flex: 1;
    overflow: visible;  /* Kein Scrollbalken, Popup scrollt bereits */
    min-height: 0;
    padding-bottom: 20px !important;  /* Zusätzlicher Abstand unten für letzte Standort-Karte */
    margin-bottom: 10px !important;
}

/* Bereitschaften-Sektion im Tages-Popup */
#dayPopupForm #dayBereitschaftenSection {
    flex-shrink: 0;
    margin-bottom: 20px;
}

/* Kalender-Popup spezifisch größer machen */
#calendarPopupForm {
    max-width: 98vw;
    max-height: 98vh;
    width: 98vw;
    height: 98vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    padding: 15px;
}



#calendarPopupForm .calendar-header {

    flex-shrink: 0;

    margin-bottom: 10px;

    padding: 0;

}



#calendarContainer {

    flex: 1;

    overflow: visible;

    min-height: 0;

    display: flex;

    flex-direction: column;

    /* Innenabstand links/rechts, damit die Tage nicht am Rand kleben */
    padding: 0 16px 20px;

    box-sizing: border-box;

}



.settings-header {

    display: flex;

    justify-content: space-between;

    align-items: center;

    margin-bottom: 20px;

    padding-bottom: 15px;

    border-bottom: 1px solid var(--border-color);
    font-size: 14px;

}



.close-btn {

    background: none;

    border: none;

    font-size: 2rem;

    color: #64748b;

    cursor: pointer;

    line-height: 1;

    padding: 0;

    width: 30px;

    height: 30px;

    display: flex;

    align-items: center;

    justify-content: center;

}



.close-btn:hover {

    color: var(--text-color);

}



.settings-tabs {

    display: flex;

    gap: 10px;

    margin-bottom: 20px;

    border-bottom: 2px solid var(--border-color);

}



.tab-btn {

    padding: 10px 20px;

    background: none;

    border: none;

    border-bottom: 2px solid transparent;

    cursor: pointer;
    font-size: 14px;

    font-weight: 500;

    color: #64748b;

    transition: all 0.2s;

    margin-bottom: -2px;

}



.tab-btn:hover {

    color: var(--primary-color);

}



.tab-btn.active {

    color: var(--primary-color);

    border-bottom-color: var(--primary-color);

}



.tab-pane {

    display: none;

}



.tab-pane.active {
    display: block;
    width: 100%;
    box-sizing: border-box;
    position: relative;
}

.tab-pane {
    display: none;
    width: 100%;
    box-sizing: border-box;
    position: relative;
}

.settings-content {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
    padding: 0;
    margin: 0;
    width: 100%;
    box-sizing: border-box;
    position: relative;
}

/* Sicherstellen, dass Settings-Sektionen korrekt positioniert sind */
.settings-section {
    width: 100%;
    box-sizing: border-box;
    position: relative;
}

.settings-list {
    width: 100%;
    box-sizing: border-box;
}



.settings-section {

    margin-bottom: 30px;

}



.settings-section h3 {

    margin-bottom: 15px;

    color: var(--text-color);
    font-size: 14px;

}



.settings-list {

    display: flex;

    flex-direction: column;

    gap: 10px;

    margin-top: 15px;
    max-height: 500px;
    overflow-y: auto;
    overflow-x: hidden;
    min-height: 200px; /* Mindesthöhe, damit Popup nicht zu klein wird */

}



.settings-item {

    display: flex;

    justify-content: space-between;

    align-items: center;

    padding: 15px;

    background: var(--secondary-color);

    border-radius: 8px;

    border: 1px solid var(--border-color);
    font-size: 14px;
}

/* Drag & Drop für Standorte */
.draggable-standort-item {
    cursor: move;
    transition: opacity 0.2s, transform 0.2s;
    user-select: none;
    -webkit-user-select: none;
    -webkit-touch-callout: none;
}

.draggable-standort-item.dragging {
    opacity: 0.5;
    transform: scale(0.95);
}

.draggable-standort-item.drag-over {
    border-top: 3px solid var(--primary-color);
    margin-top: 2px;
}

.drag-handle {
    cursor: grab;
    padding: 0 10px 0 0;
    color: #6b7280;
    font-size: 18px;
    line-height: 1;
    display: flex;
    align-items: center;
}

.draggable-standort-item:active .drag-handle,
.draggable-standort-item.dragging .drag-handle {
    cursor: grabbing;
}



.settings-item-actions {
    display: flex;
    align-items: center;
    gap: 8px; /* Kleinerer Abstand zwischen den Buttons */
}

/* Suchfeld in Settings */
.settings-search-input {
    width: 100%;
    padding: 8px 12px;
    margin-top: 12px;
    margin-bottom: 15px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 14px;
    box-sizing: border-box;
}

/* Kompakte Darstellung für Mitarbeiter */
.mitarbeiter-settings-item {
    padding: 8px 12px;
    font-size: 14px;
    line-height: 1.4;
}

.mitarbeiter-settings-item > div:first-child {
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
    min-width: 0;
}

/* Feste Höhe für Mitarbeiter-Liste, damit das Popup nicht seine Größe ändert */
#mitarbeiterList {
    max-height: 400px;
    overflow-y: auto;
    overflow-x: hidden;
}

/* Qualifikations-Checkboxen im Mitarbeiter-Formular - bündige Ausrichtung */
.qualification-pill {
    display: flex;
    align-items: center;
    cursor: pointer;
}

.qualification-pill input[type="checkbox"].qualification-checkbox {
    margin: 0;
    margin-right: 5px;
    width: 18px;
    height: 18px;
    cursor: pointer;
    vertical-align: middle;
    flex-shrink: 0;
}

.qualification-pill input[type="checkbox"].qualification-checkbox + * {
    line-height: 1;
    vertical-align: middle;
}



.btn-small {
    padding: 6px 12px;
    font-size: 14px;
    border: none; /* Kein Rahmen */
    border-radius: 6px;
    background: var(--secondary-color); /* Gleiche Hintergrundfarbe wie Container */
    color: var(--text-color);
    cursor: pointer;

    transition: all 0.2s;

}



.btn-small:hover {
    background: #e5e7eb; /* Leicht dunklerer Hintergrund beim Hover */
    opacity: 0.9;
}



.btn-small.btn-danger {
    color: #ef4444;
    border: none; /* Kein roter Rahmen */
    background: var(--secondary-color); /* Gleiche Hintergrundfarbe wie Container */
}



.btn-small.btn-danger:hover {
    background: #fee2e2; /* Leichter roter Hintergrund beim Hover für Mülleimer */
    opacity: 0.9;
}



.calendar-header {

    display: flex;

    justify-content: space-between;

    align-items: center;

    margin-bottom: 20px;

    padding-bottom: 15px;

    border-bottom: 1px solid var(--border-color);

}



#calendarContainer {

    min-height: 400px;

}



/* OVD-Übersicht oben fest verankert */

.ovd-overview {

    position: sticky;

    top: 0;

    z-index: 100;

    background: white;

    padding: 15px 20px;

    margin-bottom: 20px;

    box-shadow: var(--shadow);

    border-radius: 8px;

}



.ovd-overview h2 {

    margin-bottom: 15px;

    color: var(--primary-color);

    font-size: 1.2rem;

}



.ovd-overview-item {

    padding: 10px;

    margin-bottom: 8px;

    background: var(--color-unmanned);

    border-left: 4px solid var(--color-unmanned-border);

    border-radius: 4px;

}



/* Bereitschafts-Bereich */

.bereitschaft-section {

    margin-top: 20px;

    padding: 15px;

    background: #f8fafc;

    border-radius: 8px;

    border: 1px solid var(--border-color);

}



.bereitschaft-section h3 {

    margin-bottom: 15px;

    color: var(--text-color);

    font-size: 1rem;

}



.bereitschaften-card {

    background: #e0f2fe !important;

    border: 2px solid var(--primary-color) !important;

}



.standort-header-with-action {

    display: flex;

    justify-content: space-between;

    align-items: center;

    margin-bottom: 10px;

}



.bereitschaft-list {

    display: flex;

    flex-direction: column;

    gap: 8px;

}



.bereitschaft-item {

    display: flex;

    justify-content: space-between;

    align-items: center;

    padding: 10px;

    background: white;

    border-radius: 6px;

    border: 1px solid var(--border-color);

    gap: 10px;

}



.bereitschaft-info {

    display: flex;

    flex-direction: column;

    gap: 4px;

    flex: 1;

}



.bereitschaft-name {

    font-weight: 600;

    color: var(--text-color);

    font-size: 0.9rem;

}



.bereitschaft-standort {

    font-size: 0.8rem;

    color: #6b7280;

}



.bereitschaft-actions {

    display: flex;

    gap: 8px;

    align-items: center;

}



.bereitschaft-shift-select {

    padding: 6px 10px;

    border: 1px solid var(--border-color);

    border-radius: 4px;

    font-size: 0.85rem;

    min-width: 150px;

}



.bereitschaft-shift {

    border-left-color: #3b82f6 !important; /* Blau für Bereitschaften */

}



.bereitschaft-personnel {

    cursor: context-menu;

}



.context-menu {

    position: fixed;

    background: white;

    border: 1px solid #ccc;

    border-radius: 4px;

    box-shadow: 0 2px 8px rgba(0,0,0,0.2);

    z-index: 10000;

    max-height: 400px;

    overflow-y: auto;

    min-width: 250px;

}



.sr-only {

    position: absolute;

    width: 1px;

    height: 1px;

    padding: 0;

    margin: -1px;

    overflow: hidden;

    clip: rect(0, 0, 0, 0);

    white-space: nowrap;

    border-width: 0;

}



/* --- Suchfunktion für Mitarbeiter-Dropdown --- */

#personnelMitarbeiterSearch {

    width: 100%;

    padding: 10px;

    margin-bottom: 10px;

    border: 1px solid var(--border-color);

    border-radius: 8px;

    font-size: 14px; /* Gleiche Schriftgröße wie andere Elemente */

}



#personnelMitarbeiterSelect {
    width: 100%;
    min-height: 200px;
    max-height: 300px;
    overflow-y: auto;
    padding: 5px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 14px;
    /* Wichtig: Als Liste anzeigen, nicht als Dropdown */
    appearance: listbox !important;
    -webkit-appearance: listbox !important;
    -moz-appearance: listbox !important;
    display: block !important;
    height: auto !important;
}

/* Select-Element verstecken, da wir die Custom-Liste verwenden */
#personnelMitarbeiterSelect {
    display: none !important;
}

/* Custom Liste immer anzeigen (ersetzt das Select-Element) */
.personnel-mitarbeiter-list {
    display: block !important;
    width: 100%;
    min-height: 200px;
    max-height: 150px; /* Reduziert von 300px auf 150px = ca. 3 Zeilen weniger */
    overflow-y: auto;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: white;
    font-size: 14px;
}

.personnel-mitarbeiter-list-item {
    padding: 10px;
    cursor: pointer;
    border-bottom: 1px solid #f3f4f6;
    transition: background-color 0.2s;
}

.personnel-mitarbeiter-list-item:last-child {
    border-bottom: none;
}

.personnel-mitarbeiter-list-item:hover {
    background-color: #f9fafb;
}

.personnel-mitarbeiter-list-item.selected {
    background-color: var(--primary-color);
    color: white;
}



/* --- Readonly Qualifikationen --- */

.qualification-group.readonly {

    background: var(--secondary-color);

    padding: 10px;

    border-radius: 8px;

    border: 1px solid var(--border-color);

}



.readonly-label {

    cursor: default;

}



.readonly-label input[disabled] {

    cursor: default;

    opacity: 1;

    width: 18px;

    height: 18px;

    margin-right: 8px;

}



.readonly-label input[disabled]:checked {

    background-color: var(--primary-color) !important;

    border-color: var(--primary-color) !important;

    accent-color: var(--primary-color) !important;

    opacity: 1 !important;

}



.readonly-label input[type="checkbox"][disabled]:checked {

    background-color: var(--primary-color) !important;

    border-color: var(--primary-color) !important;

    opacity: 1 !important;

    filter: none !important;

}



/* Bessere Sichtbarkeit für checked Checkboxen */

.readonly-label input[type="checkbox"]:checked {

    appearance: checkbox;

    -webkit-appearance: checkbox;

    -moz-appearance: checkbox;

    background-color: var(--primary-color) !important;

    border: 2px solid var(--primary-color) !important;

    opacity: 1 !important;

}



.readonly-label span {

    font-weight: 500;

    color: var(--text-color);

}



/* --- Mitarbeiter-Datenblatt --- */

.datenblatt-section {

    margin-bottom: 20px;

    padding-bottom: 15px;

    border-bottom: 1px solid var(--border-color);

}



.datenblatt-section:last-child {

    border-bottom: none;

}



.datenblatt-section h3 {

    margin: 0 0 10px 0;

    color: var(--primary-color);

    font-size: 1.3rem;

}



.datenblatt-section label {

    display: block;

    margin-bottom: 8px;

    font-weight: 600;

    color: var(--text-color);

}



.datenblatt-section p {

    margin: 0;

    padding: 8px;

    background: var(--secondary-color);

    border-radius: 6px;

}



.datenblatt-section a {

    color: var(--primary-color);

    text-decoration: none;

}



.datenblatt-section a:hover {

    text-decoration: underline;

}



/* --- Kalender-Styles --- */

.calendar-header-controls {

    display: flex;

    justify-content: space-between;

    align-items: center;

    margin-bottom: 15px;

    padding: 10px 15px;

    background: var(--secondary-color);

    border-radius: 6px;

}



.calendar-header-controls h3 {

    margin: 0;

    color: var(--text-color);

    font-size: 1.1rem;

}



.calendar-day-overview {

    /* Kein eigener Scrollbalken, wächst innerhalb des Tages-Popups mit */
    max-height: none;
    overflow-y: visible;
    display: grid;

    grid-template-columns: repeat(2, 1fr);
}

/* Schichten-Dropdowns in der Gesamtübersicht: Weißer Hintergrund für bearbeitbares Aussehen */
.calendar-day-overview .shift-select,
.calendar-day-overview .shift-row > select.shift-select {
    background-color: white !important;
    background: white !important;

    gap: 12px;

}



.overview-standort-card {

    background: var(--secondary-color);

    border-radius: 6px;

    padding: 10px;

    border: 1px solid var(--border-color);

}

/* Kopfzeile je Standort im Tages-Popup: Name links, + Schicht rechts wie + Bereitschaft */
.standort-header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.standort-header-row .btn-small {
    padding: 6px 12px;
    border-radius: 6px;
    background-color: var(--primary-color);
    color: #ffffff;
    border: 1px solid var(--primary-color);
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease;
}

.standort-header-row .btn-small:hover {
    background-color: #0b93d0;
}



.standort-header {

    margin: 0 0 10px 0;

    color: var(--primary-color);

    font-size: 1rem;

    font-weight: 600;

    padding-bottom: 8px;

    border-bottom: 2px solid var(--primary-color);

}



.overview-shifts-list {

    display: flex;

    flex-direction: column;

    gap: 6px;

}



.overview-shift-row {

    display: flex;

    flex-direction: column;

    gap: 6px;

    padding: 8px;

    background: #fff;

    border-radius: 4px;

    border-left: 3px solid #ccc;

}



.overview-shift-row.fully-manned {

    border-left-color: #10b981; /* Grün */

}



.overview-shift-row.partially-manned {

    border-left-color: #f59e0b; /* Orange */

}



.overview-shift-row.unmanned {

    border-left-color: #ef4444; /* Rot */

}



.overview-shift-row.bereitschaft {

    border-left-color: #3b82f6; /* Blau für Bereitschaften */

}



.overview-shift-row.bereitschaft-manned {

    border-left-color: #10b981; /* Grün für besetzte Bereitschaften */

}



.shift-row.bereitschaft {

    border-left-color: #3b82f6 !important;

}



.shift-row.bereitschaft-manned {

    border-left-color: #10b981 !important; /* Grün für besetzte Bereitschaften */

}



.shift-name {

    font-weight: 600;

    color: var(--text-color);

    font-size: 0.9rem;

    margin-bottom: 4px;

}



.shift-personnel {

    display: flex;

    flex-direction: column;

    gap: 6px;

}



.personnel-slot-overview {

    width: 100%;

}



.personnel-slot-empty {

    padding: 6px 8px;

    background: #f3f4f6;

    border-radius: 3px;

    color: #6b7280;

    font-size: 0.8rem;

    text-align: center;

    border: 1px dashed #d1d5db;

}



.personnel-slot-filled {

    padding: 6px 8px;

    border-radius: 3px;

    color: var(--text-color);

    font-size: 0.8rem;

    display: flex;

    flex-direction: column;

    gap: 2px;

    border: 1px solid rgba(0, 0, 0, 0.1);

}



.personnel-name {

    font-weight: 500;

    font-size: 0.85rem;

}



.personnel-quals {

    font-size: 0.75rem;

    opacity: 0.8;

}



.info-text {

    padding: 8px;

    color: #6b7280;

    font-style: italic;

    text-align: center;

    font-size: 0.85rem;

}



.calendar-grid {

    display: grid;

    grid-template-columns: repeat(7, 1fr);

    gap: 4px;

    margin-top: 10px;

    flex: 1;

    min-height: 0;

    align-content: start;

    overflow: visible;

}



.calendar-weekday {

    text-align: center;

    font-weight: 600;

    color: var(--text-color);

    padding: 6px;

    background: var(--secondary-color);

    border-radius: 4px;

    font-size: 0.9rem;

}



.calendar-day {

    min-height: 60px;

    padding: 4px;

    background: white;

    border: 1px solid var(--border-color);

    border-radius: 4px;

    cursor: pointer;

    transition: all 0.2s;

    display: flex;

    flex-direction: column;

}

/* Tag im Kalender: alle Schichten besetzt (grün) */
.calendar-day.day-all-manned,
div.calendar-day.day-all-manned {
    background: var(--color-fully-manned) !important;
    background-color: var(--color-fully-manned) !important;
    border-color: var(--color-fully-manned) !important;
}

/* Tag im Kalender: offene Schichten vorhanden (dezentes Rot) */
.calendar-day.day-open-shifts,
div.calendar-day.day-open-shifts {
    background: var(--color-unmanned) !important;
    background-color: var(--color-unmanned) !important;
    border-color: var(--color-unmanned-border) !important;
}

.calendar-day:hover {
    /* Beim Hover nur den Rahmen hervorheben,
       die Hintergrundfarbe (rot/grün/weiß) bleibt erhalten */
    border-color: var(--primary-color);
}

/* Heute-Tag: Nur Umrandung, wenn Schichten vorhanden sind */
.calendar-day.today.day-open-shifts {
    background: var(--color-unmanned) !important;
    background-color: var(--color-unmanned) !important;
    border: 2px solid var(--color-unmanned-border) !important;
}

.calendar-day.today.day-all-manned {
    background: var(--color-fully-manned) !important;
    background-color: var(--color-fully-manned) !important;
    border: 2px solid var(--color-fully-manned) !important;
}

/* Heute-Tag ohne Schichten: keine besondere Umrandung */
.calendar-day.today:not(.day-open-shifts):not(.day-all-manned) {
    border: 1px solid var(--border-color);
}

.calendar-day.empty {

    background: transparent;

    border: none;

    cursor: default;

}



.calendar-day-number {

    font-weight: 600;

    margin-bottom: 2px;

    color: var(--text-color);

    font-size: 0.9rem;

}



.calendar-day-shifts {

    flex-grow: 1;

    display: flex;

    flex-direction: column;

    gap: 1px;

    font-size: 0.7rem;

    min-height: 0;

}



.calendar-shift-info {

    display: flex;

    flex-direction: column;

    gap: 2px;

}



.calendar-shift-total {

    color: var(--text-color);

    font-weight: 500;

}



.calendar-shift-open {

    color: #ef4444;

    font-weight: 600;

}



.calendar-shift-bereitschaft {

    color: #3b82f6;

    font-weight: 600;

}



/* --- Bereitschaften-Ansicht --- */
/* ENTFERNT: Bereitschaften-View-Fenster wird nicht mehr verwendet */



.bereitschaft-item-view {

    display: flex;

    justify-content: space-between;

    align-items: center;

    padding: 15px;

    margin-bottom: 10px;

    background-color: white;

    border: 1px solid var(--border-color);

    border-radius: 8px;

    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);

    cursor: pointer;

    transition: background-color 0.2s;

}



.bereitschaft-item-view:hover {

    background-color: #f9fafb;

}

/* Bereitschaften-Top-Grid im Tages-Popup */
.bereitschaften-top-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* 4 Spalten auf der Seite */
    gap: 8px;
}

.bereitschaft-top-item {
    background: #f3f4f6;                 /* leichtes Grau */
    color: #111827;
    padding: 6px 8px;                   /* etwas kleiner */
    border-radius: 6px;
    border: 1px solid #000000;          /* schwarzer Rahmen */
    cursor: pointer;
    display: flex;
    flex-direction: column;
    gap: 3px;
    position: relative;                 /* für Lösch-Icon oben rechts */
    box-shadow: none;                   /* kein zusätzlicher Schatten */
    transition: background-color 0.1s ease, border-color 0.1s ease;
}

.bereitschaft-top-item:hover {
    background: #e5e7eb;  /* Etwas dunkleres Grau beim Hover */
    border-color: #111827;
    /* Kein transform - Button bewegt sich nicht */
}

.bereitschaft-name {
    font-weight: 600;
    font-size: 0.85rem;
    text-align: center;                 /* Text zentriert */
}

.bereitschaft-typ-top {
    font-size: 0.75rem;
    opacity: 0.9;
    text-align: center;                 /* Text zentriert */
}

/* Lösch-Icon in Bereitschafts-Top-Buttons */
.bereitschaft-top-delete {
    position: absolute !important;
    top: 50% !important;
    right: 4px !important;
    transform: translateY(-50%) !important;
    background: none !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
    cursor: pointer !important;
    font-size: 16px !important;
    line-height: 1 !important;
    opacity: 0.7 !important;
    z-index: 10 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 24px !important;
    height: 24px !important;
    transition: opacity 0.2s !important;
}

.bereitschaft-top-delete:hover {
    opacity: 1 !important;
}

/* Größeres Icon nur in den Bereitschafts-Buttons */
.bereitschaft-top-delete .icon-trash-svg {
    width: 20px;
    height: 20px;
}

/* Kopfbereich "Bereitschaft" im Tages-Popup */
#dayBereitschaftenSection {
    margin-bottom: 10px;
}

#dayBereitschaftenSection .day-bereitschaften-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;                 /* Abstand zu den Bereitschafts-Buttons */
}



.bereitschaft-item-info {

    display: flex;

    flex-direction: column;

    gap: 5px;

}



.bereitschaft-item-info strong {

    font-size: 16px;

    color: var(--text-color);

}



.bereitschaft-typ {

    font-size: 14px;

    color: #6b7280;

    padding: 4px 8px;

    background-color: #e5e7eb;

    border-radius: 4px;

    display: inline-block;

    width: fit-content;

}



.bereitschaft-item-actions {

    display: flex;

    gap: 10px;

}



.context-menu {

    position: fixed;

    background-color: white;

    border: 1px solid var(--border-color);

    border-radius: 8px;

    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);

    z-index: 10000;

    min-width: 250px;

    max-width: 400px;

}



.context-menu-item {

    padding: 12px 16px;

    cursor: pointer;

    transition: background-color 0.2s;

    border-bottom: 1px solid #f3f4f6;

}



.context-menu-item:last-child {

    border-bottom: none;

}



.context-menu-item:hover {

    background-color: #f9fafb;

}

/* ============================================
   HARTE OVERRIDES - DropDown klein, Slots im Container
   ============================================ */

.shift-row {
    align-items: center !important;      /* alles vertikal zentriert */
}

.shift-row > select.shift-select {
    flex: 0 0 110px !important;
    flex-grow: 0 !important;
    flex-shrink: 0 !important;
    width: 110px !important;
    max-width: 110px !important;
    min-width: 110px !important;
    height: 32px !important;          /* FESTE Höhe, GLEICH wie Slots */
    box-sizing: border-box !important;
    padding: 6px 10px !important;     /* GLEICH wie Slots */
    border-radius: 6px !important;   /* GLEICH wie Slots */
    font-size: 13px !important;      /* GLEICH wie Slots */
    line-height: 20px !important;     /* Text vertikal zentriert */
    text-align: center !important;
    margin: 0 10px 0 0 !important;  /* Nur rechts, oben/unten = 0 für perfekte Ausrichtung */
    border: 1px solid #ccc !important; /* Border explizit setzen */
}

.shift-row > .personnel-slot {
    flex: 1 1 0 !important;
    flex-grow: 1 !important;
    min-width: 0 !important;
    max-width: none !important;
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;
    align-items: center !important;
    justify-content: flex-start !important;
    gap: 8px !important;
}

.shift-row .personnel-label {
    height: 32px !important;              /* FESTE Höhe, GLEICH wie Dropdown */
    padding: 6px 10px !important;         /* GLEICH wie Dropdown */
    border-radius: 6px !important;        /* GLEICH wie Dropdown */
    font-size: 13px !important;           /* GLEICH wie Dropdown */
    box-sizing: border-box !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;         /* Inhalt im Slot zentriert */
    border: 1px solid #e2e8f0 !important;      /* Border explizit setzen - Standard */
    margin: 0 !important;                      /* Keine Margins für perfekte Ausrichtung */
    flex: 1 1 0 !important;                    /* Slots teilen sich den verfügbaren Platz gleichmäßig */
    min-width: 0 !important;                   /* Slots können schrumpfen, aber flex sorgt für gleichmäßige Verteilung */
}

/* Slot 1 und 2: Rahmen BEIBEHALTEN */
.shift-row .personnel-label.unassigned {
    border: 1px solid var(--color-unmanned-border) !important;  /* Rahmen für unbesetzte Slots */
}

.shift-row .personnel-label.assigned {
    border: 1px solid #c9d2de !important;  /* Rahmen für besetzte Slots */
}

/* Papierkorb-Button in Slots: KEIN Rahmen */
.shift-row .personnel-label .personnel-delete-btn {
    border: none !important;
    background: none !important;
    outline: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    margin: 0 !important;
}

/* Z-Index für Popups */
#dayPopupOverlay {
    z-index: 1500 !important;
}

#dayPopupForm {
    z-index: 1501 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
}

#mitarbeiterDatenblattOverlay {
    position: fixed !important;
    z-index: 3000 !important;
}

#mitarbeiterDatenblattForm {
    position: fixed !important;
    z-index: 3001 !important;
}

/* Mitarbeiter-Datenblatt Layout */
.mitarbeiter-datenblatt-content {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

.mitarbeiter-datenblatt-info {
    flex: 1;
    min-width: 0;
}

.mitarbeiter-datenblatt-info h3 {
    margin: 0 0 15px 0;
    color: var(--primary-color);
    font-size: 1.3rem;
}

.mitarbeiter-datenblatt-info p {
    margin: 0 0 10px 0;
    padding: 0;
    background: transparent;
}

.mitarbeiter-datenblatt-info p strong {
    display: inline-block;
    min-width: 100px;
    font-weight: 600;
}

.mitarbeiter-datenblatt-kommentar {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
}

.mitarbeiter-datenblatt-kommentar label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--text-color);
}

.mitarbeiter-datenblatt-kommentar textarea {
    width: 100%;
    padding: 12px;
    border: 2px solid var(--primary-color);
    border-radius: 8px;
    font-size: 14px;
    font-family: inherit;
    resize: vertical;
    min-height: 120px;
    box-sizing: border-box;
    background-color: white;
    margin: 0;
}

.mitarbeiter-datenblatt-kommentar textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
}


/* Responsive: Auf kleineren Bildschirmen untereinander */
@media (max-width: 768px) {
    .mitarbeiter-datenblatt-content {
        flex-direction: column;
    }
}

/* Kommentar-Funktionalität */
.personnel-label.has-kommentar {
    position: relative;
}

.personnel-label.has-kommentar::after {
    content: "💬";
    position: absolute;
    top: 2px;
    right: 30px;
    font-size: 12px;
    opacity: 0.7;
}

/* Kommentar-Tooltip */
.kommentar-tooltip {
    position: fixed;
    background-color: white !important;
    color: var(--text-color);
    padding: 8px 12px;
    border: 2px solid var(--primary-color) !important;
    border-radius: 6px;
    font-size: 13px;
    max-width: 300px;
    word-wrap: break-word;
    white-space: pre-wrap;
    z-index: 10000;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
    pointer-events: none;
}

.kommentar-tooltip::before {
    content: "";
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 6px solid var(--primary-color);
}

/* Kommentar-Popup - Muss über Tagesübersicht-Popup erscheinen */
#kommentarPopupOverlay {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    z-index: 4000 !important;
    background: rgba(0, 0, 0, 0.6) !important;
}

/* Kommentar-Popup: Überschreibt .popup-form Regeln */
#kommentarPopupForm {
    position: fixed !important;
    z-index: 4001 !important;
    background-color: white !important;
    border: 2px solid var(--primary-color) !important;
    border-radius: 8px;
    padding: 0 !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
    max-width: 400px !important; /* Überschreibt .popup-form max-width: 500px */
    width: 90% !important; /* Überschreibt .popup-form width: 90% */
    box-sizing: border-box !important;
    overflow: hidden !important;
    margin: 0 !important;
    /* Position wird dynamisch in JavaScript gesetzt (auf Desktop) */
    /* Auf mobilen Geräten wird die Position von der Media Query gesetzt */
    /* Standard-Position für Desktop (wird von JavaScript überschrieben) */
    top: auto;
    left: auto;
    transform: none;
}

#kommentarPopupForm .settings-header {
    padding: 15px 20px;
    margin: 0;
    border-bottom: 1px solid var(--border-color);
    box-sizing: border-box;
}

#openShiftsPopupForm {
    display: none; /* Standard: versteckt */
    flex-direction: column;
    max-height: 90vh;
    overflow: hidden;
}

#openShiftsPopupForm[style*="flex"] {
    display: flex !important; /* Wenn per JavaScript auf flex gesetzt, dann anzeigen */
}

.popup-form.fullscreen {
    width: 95vw !important;
    height: 95vh !important;
    max-width: none !important;
    max-height: none !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
}

#openShiftsPopupForm .settings-header {
    flex-shrink: 0;
    padding: 15px 20px 10px 20px;
    margin: 0;
    margin-bottom: 0;
    border-bottom: 1px solid var(--border-color);
    box-sizing: border-box;
    background-color: white;
    position: sticky;
    top: 0;
    z-index: 10;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#openShiftsPopupForm .settings-header h2 {
    margin: 0;
    font-size: 1.3rem;
    color: var(--text-color);
}

#openShiftsPopupForm .settings-header .close-btn {
    margin: 0;
    padding: 0;
    line-height: 1;
}

#openShiftsPopupForm .form-content {
    flex: 1;
    overflow-y: visible;
    overflow-x: hidden;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
}

#openShiftsPopupForm .form-content textarea {
    flex: 1;
    min-height: 200px;
    max-height: 50vh;
    overflow-y: auto;
}

#kommentarPopupForm .form-content {
    width: 100% !important;
    box-sizing: border-box !important;
    padding: 20px !important;
    margin: 0 !important;
    display: block !important;
}

#kommentarPopupForm .form-content label {
    display: block !important;
    margin-bottom: 8px !important;
}

#kommentarPopupForm textarea {
    width: 100% !important;
    max-width: 100% !important;
    padding: 12px !important;
    border: 2px solid var(--primary-color) !important;
    border-radius: 6px !important;
    font-size: 14px !important;
    font-family: inherit !important;
    resize: vertical !important;
    min-height: 100px !important;
    box-sizing: border-box !important;
    background-color: white !important;
    margin: 0 !important;
    display: block !important;
}

#kommentarPopupForm textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
}
